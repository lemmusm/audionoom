{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport 'isomorphic-fetch';\nimport Error from './_error';\nimport Layout from '../components/Layout';\nimport Podcasts from '../components/Podcasts';\nimport Player from '../components/PodcastPlayer';\n\nvar Channel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Channel, _Component);\n\n  function Channel(props) {\n    var _this;\n\n    _classCallCheck(this, Channel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Channel).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"openPodcast\", function (event, podcast) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: podcast\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClosePodcast\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: null\n      });\n    });\n\n    _this.state = {\n      openPodcast: null\n    };\n    return _this;\n  }\n\n  _createClass(Channel, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          channel = _this$props.channel,\n          audioClips = _this$props.audioClips,\n          series = _this$props.series,\n          statusCode = _this$props.statusCode;\n      var openPodcast = this.state.openPodcast;\n\n      if (statusCode !== 200) {\n        return __jsx(Error, {\n          statusCode: statusCode\n        });\n      }\n\n      return __jsx(Layout, {\n        title: channel.title\n      }, __jsx(\"div\", {\n        style: {\n          backgroundImage: \"url(\".concat(channel.urls.banner_image.original, \")\")\n        },\n        className: \"jsx-1540501326\" + \" \" + \"banner\"\n      }), openPodcast && __jsx(\"div\", {\n        className: \"jsx-1540501326\" + \" \" + \"modal\"\n      }, __jsx(Player, {\n        clip: openPodcast,\n        onClose: this.onClosePodcast\n      })), __jsx(\"h1\", {\n        className: \"jsx-1540501326\"\n      }, channel.title), series.length > 0 && __jsx(\"div\", {\n        className: \"jsx-1540501326\"\n      }, __jsx(\"h2\", {\n        className: \"jsx-1540501326\"\n      }, \"Series\"), __jsx(\"div\", {\n        className: \"jsx-1540501326\" + \" \" + \"channels\"\n      }, series.map(function (serie) {\n        return __jsx(Link, {\n          href: \"/channel?id=\".concat(serie.id)\n        }, __jsx(\"a\", {\n          className: \"jsx-1540501326\" + \" \" + \"channel\"\n        }, __jsx(\"img\", {\n          src: serie.urls.logo_image.original,\n          alt: \"\",\n          className: \"jsx-1540501326\"\n        }), __jsx(\"h2\", {\n          className: \"jsx-1540501326\"\n        }, serie.title)));\n      }))), __jsx(\"h2\", {\n        className: \"jsx-1540501326\"\n      }, \"Ultimos Podcasts\"), __jsx(Podcasts, {\n        podcasts: audioClips,\n        onClickPodcast: this.openPodcast\n      }), __jsx(_JSXStyle, {\n        id: \"1540501326\"\n      }, \".modal.jsx-1540501326{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9999;}.channels.jsx-1540501326{display:grid;grid-gap:15px;padding:15px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));}h1.jsx-1540501326{font-weight:600px;padding:15px;}a.channel.jsx-1540501326{display:block;margin-bottom:0.5em;color:#333;-webkit-text-decoration:none;text-decoration:none;}.channel.jsx-1540501326 img.jsx-1540501326{border-radius:3px;box-shadow:0px 2px 6px rgba(0,0,0,0.15);width:100%;}h2.jsx-1540501326{padding:5px;font-size:0.9em;font-weight:600;margin:0;text-align:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9tZWRpYS9iZXR0eS83NDBlYjExYi1jNjc3LTQzY2YtODRmMS0wNDUzZmFhMzRlNTEvYmV0dHkvRVNUVURJT1MvUkVBQ1QvTkVYVC1KUy9hdWRpb25vb20vcGFnZXMvY2hhbm5lbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0Rk8sQUFHd0IsQUFRQSxBQU1JLEFBSUgsQUFNSSxBQUtOLFlBQ0ksQ0FyQkYsQ0FVTSxDQWxCakIsR0FjUyxBQVU0QixHQXZCcEMsTUFRUyxDQVBSLEFBNEJXLEdBZmxCLEdBSWEsRUFoQkwsSUFPc0QsSUFxQm5ELENBM0JDLEFBZ0JXLFFBWUgsS0EzQnRCLEFBb0JlLFdBQ2IsRUFPQSx3QkFaQSxHQVZBIiwiZmlsZSI6Ii9tZWRpYS9iZXR0eS83NDBlYjExYi1jNjc3LTQzY2YtODRmMS0wNDUzZmFhMzRlNTEvYmV0dHkvRVNUVURJT1MvUkVBQ1QvTkVYVC1KUy9hdWRpb25vb20vcGFnZXMvY2hhbm5lbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCAnaXNvbW9ycGhpYy1mZXRjaCc7XG5pbXBvcnQgRXJyb3IgZnJvbSAnLi9fZXJyb3InO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi9jb21wb25lbnRzL0xheW91dCc7XG5pbXBvcnQgUG9kY2FzdHMgZnJvbSAnLi4vY29tcG9uZW50cy9Qb2RjYXN0cyc7XG5pbXBvcnQgUGxheWVyIGZyb20gJy4uL2NvbXBvbmVudHMvUG9kY2FzdFBsYXllcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5uZWwgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgY29uc3RydWN0b3IocHJvcHMpe1xuICAgICBzdXBlcihwcm9wcylcbiAgICAgdGhpcy5zdGF0ZT17b3BlblBvZGNhc3Q6bnVsbH1cbiAgIH1cbiAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcyh7cXVlcnksIHJlc30pe1xuICAgIGxldCBpZENoYW5uZWwgPSBxdWVyeS5pZFxuICAgIHRyeXtcbiAgICAgIGxldCBbcmVxQ2hhbm5lbCwgcmVxU2VyaWVzLCByZXFBdWRpb3NdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBmZXRjaChgaHR0cHM6Ly9hcGkuYXVkaW9ib29tLmNvbS9jaGFubmVscy8ke2lkQ2hhbm5lbH1gKSxcbiAgICAgICAgZmV0Y2goYGh0dHBzOi8vYXBpLmF1ZGlvYm9vbS5jb20vY2hhbm5lbHMvJHtpZENoYW5uZWx9L2NoaWxkX2NoYW5uZWxzYCksXG4gICAgICAgIGZldGNoKGBodHRwczovL2FwaS5hdWRpb2Jvb20uY29tL2NoYW5uZWxzLyR7aWRDaGFubmVsfS9hdWRpb19jbGlwc2ApXG4gICAgICBdKVxuICAgICAgaWYoIHJlcUNoYW5uZWwuc3RhdHVzID49IDQwMCApIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSByZXFDaGFubmVsLnN0YXR1c1xuICAgICAgICByZXR1cm4geyBjaGFubmVsOiBudWxsLCBhdWRpb0NsaXBzOiBudWxsLCBzZXJpZXM6IG51bGwsIHN0YXR1c0NvZGU6IHJlcUNoYW5uZWwuc3RhdHVzIH1cbiAgICAgIH1cbiAgICAgIGxldCBkYXRhQ2hhbm5lbCA9IGF3YWl0IHJlcUNoYW5uZWwuanNvbigpXG4gICAgICBsZXQgY2hhbm5lbCA9IGRhdGFDaGFubmVsLmJvZHkuY2hhbm5lbDtcblxuICAgICAgbGV0IGRhdGFBdWRpb3MgPSBhd2FpdCByZXFBdWRpb3MuanNvbigpXG4gICAgICBsZXQgYXVkaW9DbGlwcyA9IGRhdGFBdWRpb3MuYm9keS5hdWRpb19jbGlwc1xuXG4gICAgICBsZXQgZGF0YVNlcmllcyA9IGF3YWl0IHJlcVNlcmllcy5qc29uKClcbiAgICAgIGxldCBzZXJpZXMgPSBkYXRhU2VyaWVzLmJvZHkuY2hhbm5lbHNcbiAgICAgIHJldHVybiB7IGNoYW5uZWwsIGF1ZGlvQ2xpcHMsIHNlcmllcywgc3RhdHVzQ29kZTogMjAwIH1cbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgcmV0dXJuIHsgY2hhbm5lbDogbnVsbCwgYXVkaW9DbGlwczogbnVsbCwgc2VyaWVzOiBudWxsLCBzdGF0dXNDb2RlOiA1MDMgfVxuICAgIH1cbiAgIH1cbiAgIG9wZW5Qb2RjYXN0PSAoZXZlbnQsIHBvZGNhc3QpPT57XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG9wZW5Qb2RjYXN0OiBwb2RjYXN0XG4gICAgfSlcbiAgIH1cbiAgIG9uQ2xvc2VQb2RjYXN0ID0gKGV2ZW50KSA9PntcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgb3BlblBvZGNhc3Q6IG51bGxcbiAgICB9KVxuICAgfVxuIHJlbmRlcigpIHsgICAgXG4gIGNvbnN0ICB7Y2hhbm5lbCwgYXVkaW9DbGlwcywgc2VyaWVzLCBzdGF0dXNDb2RlfSA9IHRoaXMucHJvcHNcbiAgY29uc3Qge29wZW5Qb2RjYXN0fSA9IHRoaXMuc3RhdGU7XG4gIGlmKCBzdGF0dXNDb2RlICE9PSAyMDAgKSB7XG4gICAgcmV0dXJuIDxFcnJvciBzdGF0dXNDb2RlPXsgc3RhdHVzQ29kZSB9IC8+XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQgIHRpdGxlPXtjaGFubmVsLnRpdGxlfT5cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiYW5uZXJcIiBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtjaGFubmVsLnVybHMuYmFubmVyX2ltYWdlLm9yaWdpbmFsfSlgIH19IC8+XG4gICAgIFxuICAgICAge29wZW5Qb2RjYXN0ICYmIDxkaXYgIGNsYXNzTmFtZT1cIm1vZGFsXCI+XG4gICAgICAgICA8UGxheWVyIFxuICAgICAgICAgIGNsaXA9e29wZW5Qb2RjYXN0fVxuICAgICAgICAgIG9uQ2xvc2U9IHt0aGlzLm9uQ2xvc2VQb2RjYXN0fVxuICAgICAgICAgLz5cbiAgICAgIDwvZGl2Pn1cbiAgICA8aDE+eyBjaGFubmVsLnRpdGxlIH08L2gxPlxuXG4gICAgeyBzZXJpZXMubGVuZ3RoID4gMCAmJlxuICAgICAgPGRpdj5cbiAgICAgICAgPGgyPlNlcmllczwvaDI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hhbm5lbHNcIj5cbiAgICAgICAgICB7IHNlcmllcy5tYXAoKHNlcmllKSA9PiAoXG4gICAgICAgICAgICA8TGluayBocmVmPXtgL2NoYW5uZWw/aWQ9JHsgc2VyaWUuaWQgfWB9ID5cbiAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiY2hhbm5lbFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPXsgc2VyaWUudXJscy5sb2dvX2ltYWdlLm9yaWdpbmFsIH0gYWx0PVwiXCIvPlxuICAgICAgICAgICAgICAgIDxoMj57IHNlcmllLnRpdGxlIH08L2gyPlxuICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgfVxuXG4gICAgPGgyPlVsdGltb3MgUG9kY2FzdHM8L2gyPlxuICAgIDxQb2RjYXN0c1xuICAgICAgcG9kY2FzdHM9e2F1ZGlvQ2xpcHN9XG4gICAgICBvbkNsaWNrUG9kY2FzdD17dGhpcy5vcGVuUG9kY2FzdH1cbiAgICAvPlxuICAgICAgPHN0eWxlIGpzeD5cbiAgICAgIHtgXG4gICAgICAubW9kYWx7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgdG9wOjA7XG4gICAgICAgIGxlZnQ6MDtcbiAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgYm90dG9tOjA7XG4gICAgICAgIHotaW5kZXg6OTk5OTtcbiAgICAgIH1cbiAgICAgICAgLmNoYW5uZWxzIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtZ2FwOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMTYwcHgsIDFmcikpO1xuICAgICAgICB9XG4gICAgICAgIGgxe1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OjYwMHB4O1xuICAgICAgICAgIHBhZGRpbmc6MTVweDtcbiAgICAgICAgfVxuICAgICAgICBhLmNoYW5uZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNWVtO1xuICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAuY2hhbm5lbCBpbWcge1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICBib3gtc2hhZG93OiAwcHggMnB4IDZweCByZ2JhKDAsMCwwLDAuMTUpO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIGgyIHtcbiAgICAgICAgICBwYWRkaW5nOiA1cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgIGB9XG4gICAgPC9zdHlsZT5cbiAgICA8L0xheW91dD5cbiAgKVxufVxufVxuIl19 */\\n/*@ sourceURL=/media/betty/740eb11b-c677-43cf-84f1-0453faa34e51/betty/ESTUDIOS/REACT/NEXT-JS/audionoom/pages/channel.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var query, res, idChannel, _ref2, _ref3, reqChannel, reqSeries, reqAudios, dataChannel, channel, dataAudios, audioClips, dataSeries, series;\n\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              query = _ref.query, res = _ref.res;\n              idChannel = query.id;\n              _context.prev = 2;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(_Promise.all([fetch(\"https://api.audioboom.com/channels/\".concat(idChannel)), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/child_channels\")), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/audio_clips\"))]));\n\n            case 5:\n              _ref2 = _context.sent;\n              _ref3 = _slicedToArray(_ref2, 3);\n              reqChannel = _ref3[0];\n              reqSeries = _ref3[1];\n              reqAudios = _ref3[2];\n\n              if (!(reqChannel.status >= 400)) {\n                _context.next = 13;\n                break;\n              }\n\n              res.statusCode = reqChannel.status;\n              return _context.abrupt(\"return\", {\n                channel: null,\n                audioClips: null,\n                series: null,\n                statusCode: reqChannel.status\n              });\n\n            case 13:\n              _context.next = 15;\n              return _regeneratorRuntime.awrap(reqChannel.json());\n\n            case 15:\n              dataChannel = _context.sent;\n              channel = dataChannel.body.channel;\n              _context.next = 19;\n              return _regeneratorRuntime.awrap(reqAudios.json());\n\n            case 19:\n              dataAudios = _context.sent;\n              audioClips = dataAudios.body.audio_clips;\n              _context.next = 23;\n              return _regeneratorRuntime.awrap(reqSeries.json());\n\n            case 23:\n              dataSeries = _context.sent;\n              series = dataSeries.body.channels;\n              return _context.abrupt(\"return\", {\n                channel: channel,\n                audioClips: audioClips,\n                series: series,\n                statusCode: 200\n              });\n\n            case 28:\n              _context.prev = 28;\n              _context.t0 = _context[\"catch\"](2);\n              return _context.abrupt(\"return\", {\n                channel: null,\n                audioClips: null,\n                series: null,\n                statusCode: 503\n              });\n\n            case 31:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[2, 28]]);\n    }\n  }]);\n\n  return Channel;\n}(Component);\n\nexport { Channel as default };","map":{"version":3,"sources":["/media/betty/740eb11b-c677-43cf-84f1-0453faa34e51/betty/ESTUDIOS/REACT/NEXT-JS/audionoom/pages/channel.js"],"names":["React","Component","Error","Layout","Podcasts","Player","Channel","props","event","podcast","preventDefault","setState","openPodcast","state","channel","audioClips","series","statusCode","title","backgroundImage","urls","banner_image","original","onClosePodcast","length","map","serie","id","logo_image","query","res","idChannel","all","fetch","reqChannel","reqSeries","reqAudios","status","json","dataChannel","body","dataAudios","audio_clips","dataSeries","channels"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'isomorphic-fetch';\nimport Error from './_error';\nimport Layout from '../components/Layout';\nimport Podcasts from '../components/Podcasts';\nimport Player from '../components/PodcastPlayer';\n\nexport default class Channel extends Component {\n   constructor(props){\n     super(props)\n     this.state={openPodcast:null}\n   }\n  static async getInitialProps({query, res}){\n    let idChannel = query.id\n    try{\n      let [reqChannel, reqSeries, reqAudios] = await Promise.all([\n        fetch(`https://api.audioboom.com/channels/${idChannel}`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\n      ])\n      if( reqChannel.status >= 400 ) {\n        res.statusCode = reqChannel.status\n        return { channel: null, audioClips: null, series: null, statusCode: reqChannel.status }\n      }\n      let dataChannel = await reqChannel.json()\n      let channel = dataChannel.body.channel;\n\n      let dataAudios = await reqAudios.json()\n      let audioClips = dataAudios.body.audio_clips\n\n      let dataSeries = await reqSeries.json()\n      let series = dataSeries.body.channels\n      return { channel, audioClips, series, statusCode: 200 }\n    }\n    catch(e) {\n      return { channel: null, audioClips: null, series: null, statusCode: 503 }\n    }\n   }\n   openPodcast= (event, podcast)=>{\n    event.preventDefault();\n    this.setState({\n      openPodcast: podcast\n    })\n   }\n   onClosePodcast = (event) =>{\n    event.preventDefault();\n    this.setState({\n      openPodcast: null\n    })\n   }\n render() {    \n  const  {channel, audioClips, series, statusCode} = this.props\n  const {openPodcast} = this.state;\n  if( statusCode !== 200 ) {\n    return <Error statusCode={ statusCode } />\n  }\n\n  return (\n    <Layout  title={channel.title}>\n      \n      <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\n     \n      {openPodcast && <div  className=\"modal\">\n         <Player \n          clip={openPodcast}\n          onClose= {this.onClosePodcast}\n         />\n      </div>}\n    <h1>{ channel.title }</h1>\n\n    { series.length > 0 &&\n      <div>\n        <h2>Series</h2>\n        <div className=\"channels\">\n          { series.map((serie) => (\n            <Link href={`/channel?id=${ serie.id }`} >\n              <a className=\"channel\">\n                <img src={ serie.urls.logo_image.original } alt=\"\"/>\n                <h2>{ serie.title }</h2>\n              </a>\n            </Link>\n          ))}\n        </div>\n      </div>\n    }\n\n    <h2>Ultimos Podcasts</h2>\n    <Podcasts\n      podcasts={audioClips}\n      onClickPodcast={this.openPodcast}\n    />\n      <style jsx>\n      {`\n      .modal{\n        position: fixed;\n        top:0;\n        left:0;\n        right:0;\n        bottom:0;\n        z-index:9999;\n      }\n        .channels {\n          display: grid;\n          grid-gap: 15px;\n          padding: 15px;\n          grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\n        }\n        h1{\n          font-weight:600px;\n          padding:15px;\n        }\n        a.channel {\n          display: block;\n          margin-bottom: 0.5em;\n          color: #333;\n          text-decoration: none;\n        }\n        .channel img {\n          border-radius: 3px;\n          box-shadow: 0px 2px 6px rgba(0,0,0,0.15);\n          width: 100%;\n        }\n        h2 {\n          padding: 5px;\n          font-size: 0.9em;\n          font-weight: 600;\n          margin: 0;\n          text-align: center;\n        }\n      `}\n    </style>\n    </Layout>\n  )\n}\n}\n"]},"metadata":{},"sourceType":"module"}